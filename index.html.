<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For You, With All My Heart üíç</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0f0c29; --bg2:#302b63; --bg3:#24243e;
      --accent:#ff5e9c; --accent2:#ffd2e1; --gold:#ffd166; --ring:#ffcc00;
      --text:#ffffff; --glass: rgba(255,255,255,0.08); --border: rgba(255,255,255,0.15);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 1200px at 20% 10%, #3b2c85 0%, transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
      overflow:hidden;
    }

    /* Confetti canvas */
    #confetti{
      position:fixed; inset:0;
      pointer-events:none; z-index:5;
    }

    /* Floating hearts layer */
    .hearts{
      position:fixed; inset:0; overflow:hidden; z-index:1; pointer-events:none;
    }
    .hearts span{
      position:fixed;
      bottom:-5vh;
      font-size:22px;
      opacity:.85;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,.25));
      animation: floatUp linear infinite;
      will-change: transform, opacity;
    }
    @keyframes floatUp{
      0%{ transform:translateY(0) translateX(0) rotate(0deg); opacity:0; }
      10%{opacity:.9}
      50%{ transform:translateY(-55vh) translateX(20px) rotate(20deg);}
      100%{ transform:translateY(-110vh) translateX(-10px) rotate(-20deg); opacity:0; }
    }

    /* Main card */
    main{
      position:relative;
      z-index:2;
      height:100%;
      display:grid;
      place-items:center;
      padding:20px;
    }
    .card{
      width:min(820px, calc(100% - 32px));
      background:linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
      border:1px solid var(--border);
      border-radius:24px;
      padding:40px 28px 32px;
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      text-align:center;
    }
    h1{
      margin:0 0 8px 0;
      font-family:'Dancing Script', cursive;
      font-size: clamp(36px, 6vw, 64px);
      line-height:1.1;
      text-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .sub{
      margin:0 0 18px 0;
      opacity:.9;
      font-weight:300;
      letter-spacing:.2px;
    }
    #typewriter{
      min-height:2.2em;
      font-size: clamp(16px, 2.5vw, 20px);
      color:#ffd9ea;
      text-shadow: 0 6px 22px rgba(0,0,0,.35);
    }
    .ring{
      font-size: clamp(48px, 8vw, 86px);
      margin: 8px 0 12px;
      filter: drop-shadow(0 8px 24px rgba(0,0,0,.25));
      animation: sparkle 2s ease-in-out infinite;
    }
    @keyframes sparkle{
      0%,100%{ transform:scale(1) rotate(0); filter:drop-shadow(0 8px 24px rgba(255, 209, 102, .5)); }
      50%{ transform:scale(1.08) rotate(-6deg); filter:drop-shadow(0 12px 28px rgba(255, 209, 102, .85)); }
    }

    .buttons{
      position:relative;
      display:flex;
      gap:16px;
      justify-content:center;
      align-items:center;
      margin-top:20px;
      min-height:66px;
      flex-wrap:wrap;
    }
    button{
      border:none; cursor:pointer;
      padding:14px 22px;
      border-radius:999px;
      font-weight:700; letter-spacing:.3px;
      transition: transform .15s ease, box-shadow .2s ease, background .2s ease, opacity .2s ease;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    #yesBtn{
      background: linear-gradient(135deg, #ff5e9c, #ff86b8);
      color:white;
    }
    #yesBtn:hover{ transform: translateY(-2px) scale(1.03); }
    #noBtn{
      background: linear-gradient(135deg, #35345d, #2a2950);
      color:#ffd9ea;
      position:static;
    }
    #noBtn.running{
      position:fixed; z-index:3; /* escapes the layout to run away */
    }
    .affirmation{
      margin-top:18px;
      font-weight:600;
      color:#fff7b0;
      display:none;
    }

    footer{
      position:fixed; bottom:10px; left:0; right:0;
      text-align:center; z-index:2;
      font-size:12px; opacity:.6;
    }
    a, a:visited{ color:#ffd2e1; }

    @media (max-width:480px){
      .card{ padding:28px 18px 22px; }
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" aria-hidden="true"></div>

  <main>
    <section class="card" aria-live="polite">
      <div class="ring">üíç</div>
      <h1>Will you marry me, <span id="herName">my love</span>?</h1>
      <p class="sub">I promise to be your best friend, your loudest cheerleader, and your forever home.</p>
      <p id="typewriter"></p>

      <div class="buttons">
        <button id="yesBtn" aria-label="Yes, I will!">Yes! üíñ</button>
        <button id="noBtn" aria-label="No">Umm... no üòÖ</button>
      </div>
      <div class="affirmation" id="affirmation">She said YES! This is the happiest moment of my life. ü•πüíò</div>
    </section>
  </main>

  <footer>
    Tip: You can set her name in the URL like <code>?name=Emily</code> and press F11 for full-screen.
  </footer>

  <script>
    // Utility
    const $ = (s, p=document) => p.querySelector(s);
    const rand = (min, max) => Math.random()*(max-min)+min;
    const pick = arr => arr[Math.floor(Math.random()*arr.length)];

    // Set her name from URL or prompt
    (function setName(){
      const params = new URLSearchParams(location.search);
      let name = (params.get('name') || '').trim();
      if(!name){
        try { name = (prompt("What is her name? (optional)") || "").trim(); } catch(e){}
      }
      if(name) $('#herName').textContent = name;
    })();

    // Typewriter message
    const lines = [
      "From the moment I met you, my world got brighter.",
      "You make ordinary days feel like adventures.",
      "I want to hold your hand through every sunrise and every storm.",
      "So... will you make me the luckiest person alive?"
    ];
    (function typewriter(){
      const el = $('#typewriter');
      let li = 0, ci = 0, current = "", erasing=false;

      function tick(){
        if(!erasing){
          current = lines[li].slice(0, ++ci);
          el.textContent = current + (ci % 2 ? "‚ñå" : " ");
          if(ci === lines[li].length){
            setTimeout(()=> erasing = true, 1400);
          }
        } else {
          current = lines[li].slice(0, --ci);
          el.textContent = current + (ci % 2 ? "‚ñå" : " ");
          if(ci <= 0){
            erasing = false;
            li = (li+1) % lines.length;
          }
        }
        const speed = erasing ? rand(18,32) : rand(26,40);
        setTimeout(tick, speed);
      }
      tick();
    })();

    // Floating hearts
    (function hearts(){
      const container = $('.hearts');
      const colors = ['#ff5e9c', '#ff86b8', '#ffa3cb', '#ffd2e1', '#ff7aa9'];
      const count = 34;
      for(let i=0;i<count;i++){
        const s = document.createElement('span');
        s.textContent = pick(['‚ù§','üíï','üíñ','üíò','üíó']);
        s.style.left = rand(2, 98) + 'vw';
        s.style.fontSize = rand(14, 32) + 'px';
        s.style.animationDuration = rand(10, 22) + 's';
        s.style.animationDelay = rand(-10, 10) + 's';
        s.style.color = pick(colors);
        s.style.opacity = rand(.55, .95);
        container.appendChild(s);
      }
    })();

    // Runaway "No" button
    (function runaway(){
      const no = $('#noBtn');
      let activated = false;

      function move(){
        if(!activated){
          no.classList.add('running');
          activated = true;
        }
        const padding = 10;
        const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
        const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        const rect = no.getBoundingClientRect();
        const maxX = vw - rect.width - padding;
        const maxY = vh - rect.height - padding;
        const x = rand(padding, maxX);
        const y = rand(padding, maxY);
        no.style.left = x + 'px';
        no.style.top = y + 'px';
        no.style.transform = 'scale(1.02)';
        setTimeout(()=> no.style.transform = 'scale(1)', 140);
      }

      no.addEventListener('mouseenter', move);
      no.addEventListener('click', move);
      // Extra spice: on mobile, touching anywhere near it moves it
      no.addEventListener('touchstart', (e)=>{ e.preventDefault(); move(); }, {passive:false});
    })();

    // Confetti
    (function(){
      const canvas = $('#confetti');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = window.innerWidth;
      let H = canvas.height = window.innerHeight;
      window.addEventListener('resize', ()=>{
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
      });

      const colors = ['#ff5e9c','#ffd166','#06d6a0','#118ab2','#ef476f','#ffd2e1','#ffee93'];
      let particles = [];
      let running = false;
      let rafId = null;

      function burst(count=250){
        particles = [];
        for(let i=0;i<count;i++){
          particles.push({
            x: rand(0, W),
            y: rand(-30, -10),
            r: rand(4,8),
            w: rand(6,14),
            h: rand(6,14),
            tilt: rand(-10,10),
            tiltSpeed: rand(.05,.22),
            speed: rand(2.5, 6.5),
            angle: rand(-Math.PI, Math.PI),
            color: pick(colors),
            alpha: rand(.85,1),
            spin: rand(-0.2, 0.2),
            shape: Math.random() < 0.5 ? 'rect' : 'circle'
          });
        }
        if(!running){
          running = true;
          loop();
          setTimeout(()=> running=false, 6000); // stop after 6s
        }
      }

      function loop(){
        ctx.clearRect(0,0,W,H);
        particles.forEach(p=>{
          p.tilt += p.tiltSpeed;
          p.x += Math.sin(p.tilt) * .9;
          p.y += p.speed;
          p.angle += p.spin;
          p.alpha -= 0.0035;
          ctx.globalAlpha = Math.max(p.alpha, 0);
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.angle);
          ctx.fillStyle = p.color;
          if(p.shape === 'rect'){
            ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
          }else{
            ctx.beginPath();
            ctx.arc(0,0,p.r,0,Math.PI*2);
            ctx.fill();
          }
          ctx.restore();
        });
        ctx.globalAlpha = 1;

        particles = particles.filter(p=> p.y < H+50 && p.alpha > 0.02);
        if(running || particles.length){
          rafId = requestAnimationFrame(loop);
        }else{
          cancelAnimationFrame(rafId);
          ctx.clearRect(0,0,W,H);
        }
      }

      // Wire up Yes button to confetti + message
      const yes = $('#yesBtn');
      const no = $('#noBtn');
      const affirmation = $('#affirmation');

      yes.addEventListener('click', ()=>{
        yes.disabled = true;
        no.disabled = true;
        burst(320);
        affirmation.style.display = 'block';
        // Big ring pulse
        const ring = document.querySelector('.ring');
        ring.style.animation = 'sparkle .8s ease-in-out 1, sparkle 2s ease-in-out infinite .8s';
        // Subtle page flash
        document.body.animate([{filter:'brightness(1.3)'},{filter:'brightness(1)'}],{duration:700, easing:'ease-out'});
      });
    })();
  </script>
</body>
</html>
